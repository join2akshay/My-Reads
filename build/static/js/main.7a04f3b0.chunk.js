(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(17),c=a.n(r),s=a(3),l=a(4),i=a(6),u=a(5),m=a(7),h=a(14),d="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:k},p=function(){return fetch("".concat(d,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},f=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(h.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(25),a(11)),y=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.book,a=t.imageLinks?t.imageLinks.thumbnail:"";return n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(a,'"')}}),n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onChange:function(t){return e.props.moveBooks(e.props.book,t.target.value)},value:this.props.currentShelf},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))),n.a.createElement("div",{className:"book-title"},"To Kill a Mockingbird"),n.a.createElement("div",{className:"book-authors"},"Harper Lee"))}}]),t}(n.a.Component),g=a(8),N=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"list-books"},n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads")),n.a.createElement("div",{className:"list-books-content"},n.a.createElement("div",null,n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},this.props.books.filter(function(e){return"currentlyReading"===e.shelf}).map(function(t){return n.a.createElement("li",{key:t.id},n.a.createElement(y,{book:t,currentShelf:"currentlyReading",moveBooks:e.props.moveBooks}))})))),n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},this.props.books.filter(function(e){return"wantToRead"===e.shelf}).map(function(t){return n.a.createElement("li",{key:t.id},n.a.createElement(y,{book:t,currentShelf:"wantToRead",moveBooks:e.props.moveBooks}))})))),n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},"Read"),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},this.props.books.filter(function(e){return"read"===e.shelf}).map(function(t){return n.a.createElement("li",{key:t.id},n.a.createElement(y,{book:t,currentShelf:"read",moveBooks:e.props.moveBooks}))})))))),n.a.createElement("div",{className:"open-search"},n.a.createElement(g.b,{to:"/search"},n.a.createElement("button",{onClick:function(){return e.setState({showSearchPage:!0})}},"Add a book"))))}}]),t}(n.a.Component),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={querry:"",searchedBooks:[]},a.updateQuerry=function(e){a.setState({querry:e.target.value}),console.log(e.target.value),a.updateSearchedBooks(e.target.value)},a.updateSearchedBooks=function(e){e?v(e).then(function(e){e.error?a.setState({searchedBooks:[]}):a.setState({searchedBooks:e})}):a.setState({searchedBooks:[]})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(g.b,{to:"/"},n.a.createElement("button",{className:"close-search"},"Close")),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:this.updateQuerry}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},this.state.searchedBooks.map(function(t){var a="none";return e.props.books.map(function(e){return e.id===t.id?a=e.shelf:""}),n.a.createElement("li",{key:t.id},n.a.createElement(y,{book:t,moveBooks:e.props.moveBooks,currentShelf:a}))}))))}}]),t}(o.Component),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={showSearchPage:!1,books:[]},a.dispaly=function(){p().then(function(e){a.setState({books:e})})},a.componentDidMount=function(){a.dispaly()},a.moveBooks=function(e,t){f(e,t).then(function(){a.dispaly()})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app"},n.a.createElement(E.a,{exact:!0,path:"/",render:function(){return n.a.createElement(N,{books:e.state.books,moveBooks:e.moveBooks})}}),n.a.createElement(E.a,{path:"/Search",render:function(){return n.a.createElement(j,{books:e.state.books,moveBooks:e.moveBooks})}}))}}]),t}(n.a.Component);a(32);c.a.render(n.a.createElement(g.a,null,n.a.createElement(O,null)),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.7a04f3b0.chunk.js.map